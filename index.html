<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Masked Video Inside SVG</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main>
      <section class="landing-wrapper">
        <div class="left">
          <h1>
            Grow with <br /><span class="h1-span">confidence</span>
          </h1>
          <p>
            Custom investment solutions <br /> designed for institutional clients.
            <br /> Grow with confidence.
          </p>
          <button>Meet the team</button>
        </div>
        <div class="right">
          <div class="svg-wrapper">
            <svg
              id="animated-svg"
              height="100%"
              width="100%"
              viewBox="0 0 690 680"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              preserveAspectRatio="xMidYMid meet"
            >
              <defs>
                <clipPath id="mask-path">
                  <path
                    d="M0 1701V487.498H101.658l-.619-108.401H206.23S275.917 0 696 2V1701H0Z"
                  />
                </clipPath>
              </defs>

              <path
                id="fill-path"
                d="M0 1701V487.498H101.658l-.619-108.401H206.23S275.917 0 696 2V1701H0Z"
                fill="#d1abe8"
                opacity="0"
              />

              <g id="video-group" clip-path="url(#mask-path)">
                <image
                  id="svg-video"
                  href="/owen-lystrup-boLgiM0qwkg-unsplash.jpg"
                  x="0"
                  y="0"
                  width="690"
                  height="680"
                  preserveAspectRatio="xMidYMid slice"
                />
              </g>

              <path
                id="border-path"
                d="M0 1701V487.498H101.658l-.619-108.401H206.23S275.917 0 696 2V1701H0Z"
                fill="none"
                stroke="#d1abe8"
                stroke-width="8"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
        </div>
      </section>
    </main>

    <script >
 gsap.registerPlugin(ScrollTrigger);

const path = document.querySelector("#border-path");
const fillPath = document.querySelector("#fill-path");
const video = document.querySelector("#svg-video");
const pathLength = path.getTotalLength();

gsap.set(path, {
  strokeDasharray: pathLength,
  strokeDashoffset: pathLength,
});

gsap.set(fillPath, {
  opacity: 0,
});

gsap.set(video, {
  scale: 1.5,
  x: "-25%", // Shift left to reveal left clipped part
  transformOrigin: "top left",
});

gsap.timeline({
  scrollTrigger: {
    trigger: ".landing-wrapper",
    start: "top top",
    end: "bottom top",
    scrub: true,
    pin: true,
  }
})
.to(path, {
  strokeDashoffset: 0,
  duration: 4,
})
.to(fillPath, {
  opacity: 1,
  duration: 4,
}, 0)
.to(video, {
  scale: 1, // Return to original scale
  x: "0%",  // Center the image
  duration: 4,
}, 0)
.to(".svg-wrapper", {
  scale: 1, // Minimal expansion to full screen
  transformOrigin: "100% 100%",
  duration: 4,
}, 0)
.to(".left", {
  y: "-100%",
  duration: 4,
}, 0);
</script>
  </body>
</html>
